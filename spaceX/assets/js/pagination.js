// let products = [
//   {
//     id: "M1",
//     title: "O",
//     price: "$30.00",
//     img: "assets/img/t-shirt-1.png",
//   },
//   {
//     id: "M2",
//     title: "T",
//     price: "$30.00",
//     img: "assets/img/t-shirt-2.png",
//   },
//   {
//     id: "M3",
//     title: "P",
//     price: "$55.00",
//     img: "assets/img/t-shirt-3.png",
//   },
//   {
//     id: "M5",
//     title: "Q",
//     price: "$30.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M4",
//     title: "S",
//     price: "$45.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M6",
//     title: "R",
//     price: "$15.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M7",
//     title: "G",
//     price: "$98",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M8",
//     title: "H",
//     price: "$25.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M9",
//     title: "F",
//     price: "$60",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M10",
//     title: "I",
//     price: "$32.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M11",
//     title: "E",
//     price: "$19.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M12",
//     title: "J",
//     price: "$55",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M13",
//     title: "D",
//     price: "$60.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M14",
//     title: "K",
//     price: "$70.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M15",
//     title: "L",
//     price: "$60.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M16",
//     title: "M",
//     price: "$65.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M17",
//     title: "N",
//     price: "$80.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M18",
//     title: "A",
//     price: "$50.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M19",
//     title: "C",
//     price: "$14.00",
//     img: "assets/img/t-shirt-4.png",
//   },
//   {
//     id: "M20",
//     title: "B",
//     price: "$56.00",
//     img: "assets/img/t-shirt-4.png",
//   },
// ];

let products = [
    {
      id: "M1",
      title: "MEN'S SPACEX WHITE T-SHIRT",
      price: "$30.00",
      img: "assets/img/t-shirt-1.png",
    },
    {
      id: "M2",
      title: "OCCUPY MARS T-SHIRT",
      price: "$30.00",
      img: "assets/img/t-shirt-2.png",
    },
    {
      id: "M3",
      title: "MEN'S FALCON T-SHIRT",
      price: "$55.00",
      img: "assets/img/t-shirt-3.png",
    },
    {
      id: "M5",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$30.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M4",
      title: "MEN'S CREW DRAGON SCHEMATIC T-SHIRT",
      price: "$45.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M6",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$15.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M7",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$98",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M8",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$25.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M9",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$60",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M10",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$32.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M11",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$19.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M12",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$55",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M13",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$60.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M14",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$70.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M15",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$60.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M16",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$65.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M17",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$80.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M18",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$50.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M19",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$14.00",
      img: "assets/img/t-shirt-4.png",
    },
    {
      id: "M20",
      title: "MEN'S SPACEX T-SHIRT 4",
      price: "$56.00",
      img: "assets/img/t-shirt-4.png",
    },
  ];


let itemsPerPage = 5;
let currentPage = 1;
let sortby = "name-asc";

const selectItemsPerPage = document.getElementById("items-per-page");
selectItemsPerPage.addEventListener("change", (e) => {
  if (e.target.value === "") {
    return;
  }
  itemsPerPage = Number(e.target.value);
  currentPage = 1;
  displayProducts();
  displayPagination();
});

function displayProducts() {
  console.log(currentPage);
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const productListDiv = document.getElementById("product-list");
  productListDiv.innerHTML = "";
  console.log(products);
  for (let i = startIndex; i < endIndex && i < products.length; i++) {
    const product = products[i];
    const productDiv = document.createElement("div");
    productDiv.classList.add("col-lg-3", "col-md-4", "col-6");
    productDiv.innerHTML = `
            <a href="details.html?id=${product.id}&price=${product.price}&title=${product.title}&img=${product.img}" class="d-block">
                <img class="img-fluid"
                    src="${product.img}" alt="${product.title}" />
            </a>
            <div class="text-center mb-4 mt-3">
                <p>${product.title}</p>
                <p>${product.price}</p>
            </div>
            <ol class="carousel-indicators galleryIndicator">
                <li data-bs-target="#" data-bs-slide-to="0" class="active"></li>
                <li data-bs-target="#" data-bs-slide-to="1"></li>
                <li data-bs-target="#" data-bs-slide-to="2"></li>
            </ol>
        
    `;
    productListDiv.appendChild(productDiv);
  }
}

function displayPagination() {
  const totalPages = Math.ceil(products.length / itemsPerPage);
  const paginationDiv = document.getElementById("pagination");
  paginationDiv.innerHTML = "";
  for (let i = 1; i <= totalPages; i++) {
    const li = document.createElement("li");
    li.classList.add("page-item");
    const anchor = document.createElement("a");
    anchor.innerText = i;
    anchor.href = "#"
    anchor.classList.add("page-link");
    li.appendChild(anchor);
    if (i === currentPage) {
      li.disabled = true;
      li.classList.add("active");
    }
    li.addEventListener("click", () => {
      currentPage = i;
      displayProducts();
      displayPagination();
    });
    paginationDiv.appendChild(li);
  }
}

function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: "smooth",
  });
}

function sortProducts(sortBy) {
  if (sortBy === "name-asc") {
    products.sort(function (a, b) {
      const titleA = a.title.toUpperCase();
      const titleB = b.title.toUpperCase();
      if (titleA < titleB) {
        return -1;
      }
      if (titleA > titleB) {
        return 1;
      }
      return 0;
    });
    return products;
  }
  if (sortBy === "name-desc") {
    products.sort(function (a, b) {
      const titleA = a.title.toUpperCase();
      const titleB = b.title.toUpperCase();
      if (titleA < titleB) {
        return 1;
      }
      if (titleA > titleB) {
        return -1;
      }
      return 0;
    });
    return products;
  }
  if (sortBy === "price-asc") {
    products.sort((a, b) => {
      const priceA = Number(a.price.slice(1));
      const priceB = Number(b.price.slice(1));
      return priceA - priceB;
    });
    return products;
  }
  if (sortBy === "price-desc") {
    products.sort((a, b) => {
      const priceA = Number(a.price.slice(1));
      const priceB = Number(b.price.slice(1));
      return priceB - priceA;
    });
    return products;
  }
}

document.getElementById("sort-by").addEventListener("change", (e) => {
  console.log(e.target.value);
  const sortedProducts = sortProducts(e.target.value);
  products = sortedProducts;
  displayProducts();
});

sortProducts(sortby);
displayProducts();
displayPagination();

